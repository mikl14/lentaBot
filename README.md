# lentaBot

[lentaBot](https://github.com/mikl14/lentaBot) — это клиентский бот для Telegram, написанный на Java с использованием Spring Boot и Telegram Bot API.

## Описание

Этот бот взаимодействует с пользователями, которые могут добавлять его в чаты. lentaBot не является stateless-сервисом, так как для удобства пользователей он хранит сессии в Redis. Это позволяет сохранять состояние между запросами и улучшать пользовательский опыт.

Для управления состоянием пользователей используется **Spring State Machine** — состояния каждого пользователя сохраняются в Redis. Команды вызывают события, которые приводят к изменению состояния. Удерживать состояние пользователя нужно, чтобы пользователь мог нажать на кнопку "Подписаться на канал" и затем отправить ссылку на канал. Существует и другие состояния, в которых от пользователя ожидается определённый ввод.

## Основные классы

- **MessageBuilder** — решает проблему ограничения типов сообщений, которые бот может прикреплять к своим сообщениям. Предоставляет инструментарий для создания сообщений.

- **BotMessageService** — предоставляет инструменты для создания служебных сообщений бота (клавиатуры, кнопки, панели).

- **TelegramBot** — содержит основную бизнес-логику бота: обработка команд и сообщений из чатов.

- **RestService** и **DataBaseRestService** — REST-контроллеры для сервисов бота и базы данных. В новых версиях архитектура устроена иначе, но в текущей реализации сервисы связаны напрямую через REST.

## Технологии

- Язык программирования: Java  
- Фреймворк: Spring Boot  
- Telegram Bot API  
- Управление состояниями с помощью Spring State Machine с хранением сессий в Redis  
- Хранение сессий пользователей в Redis  
